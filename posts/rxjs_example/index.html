<!DOCTYPE html><html domain="dushkin.tech" lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><link href="/img/favicon/apple-touch-icon.png?hash=4886ee33b3" rel="apple-touch-icon" sizes="180x180"><link href="/img/favicon/favicon-32x32.png?hash=44c2abca90" rel="icon" type="image/png" sizes="32x32"><link href="/img/favicon/favicon-16x16.png?hash=4f3ec2ea83" rel="icon" type="image/png" sizes="16x16"><link href="/img/favicon/site.webmanifest?hash=df884c5d9d" rel="manifest"><link href="/img/favicon/safari-pinned-tab.svg?hash=faeecd6d45" rel="mask-icon" color="#5bbad5"><meta content="#da532c" name="msapplication-TileColor"><link href="/img/favicon/android-chrome-192x192.png?hash=97ce250480" rel="icon" type="image/png"><meta content="#ffe6b7" name="theme-color"><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name="robots"><title>Step-by-Step Guide. Creating a React Hook for Web Page Element Movement Using RxJS | Dmitrii Dushkin blog</title><meta content="Step-by-Step Guide. Creating a React Hook for Web Page Element Movement Using RxJS" property="og:title"><meta content="A detailed guide on creating a React hook for adding draggable functionality to web elements using RxJS, with a focus on practical implementation and testing." name="description"><meta content="A detailed guide on creating a React hook for adding draggable functionality to web elements using RxJS, with a focus on practical implementation and testing." property="og:description"><meta content="summary_large_image" name="twitter:card"><meta content="@sky2high0" name="twitter:site"><meta content="@sky2high0" name="twitter:creator"><meta content="https://dushkin.tech/img/for_posts/rxjs_example/cover.png" property="og:image"><link href="https://dushkin.tech/posts/rxjs_example/" rel="canonical"><meta content="no-referrer-when-downgrade" name="referrer"><link href="/feed/feed.xml" rel="alternate" type="application/atom+xml" title="Dmitrii's tech blog"><link href="/" rel="preconnect" crossorigin=""><link href="https://fonts.googleapis.com" rel="preconnect"><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin=""><link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,500;0,700;1,500;1,700&amp;display=swap" rel="stylesheet"><script async="" src="/js/min.js?hash=e9bb8a8457" defer=""></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BJQNRSC76D"></script><script csp-hash="sha256-TVz+2vN3+ZgiiRPB9uCg0Ay6n/8PgEf0tWGg3Bcy+DU=">window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-BJQNRSC76D');</script><script csp-hash="sha256-Ky9qZOPnMhQV/s7Fdb9TYAOfU4KtWNqCZaFK8tSzXa0=">if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><style>.token.punctuation{color:#ccc}.token.tag{color:#e2777a}.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property{color:#f8c555}.token.builtin,.token.important,.token.keyword{color:#cc99cd}.token.string{color:#7ec699}.token.operator,.token.url{color:#67cdcc}.token.important,header nav a{font-weight:700}.token.inserted{color:green}header{text-align:center;display:flex;align-items:center;flex-direction:column}header nav{padding:.375em 0;align-self:flex-start;display:flex;gap:16px}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav a{text-decoration:none}.pill{display:inline-block;background-color:var(--background-alt);color:var(--text-muted);border-radius:12px;padding:4px 8px;margin:4px 4px 0 0}:root{--background-body:#fffff6;--background:#efefef;--background-alt:#f7f7f7;--selection:#9e9e9e;--text-main:#363636;--text-bright:#000;--text-muted:#63686d;--links:#0076d1;--border:#dbdbdb;--code:#000}@media (prefers-color-scheme:dark){:root{--background-body:#202b38;--background:#161f27;--background-alt:#1a242f;--selection:#1c76c5;--text-main:#dbdbdb;--text-bright:#fff;--text-muted:#a9b1ba;--links:#41adff;--border:#526980;--code:#ffbe85}}html{scrollbar-width:thin;font-family:"Nunito",sans-serif;font-size:17px}body{max-width:800px;margin:20px auto;padding:0 10px;word-wrap:break-word;color:#363636;color:var(--text-main);background:#fff;background:var(--background-body);text-rendering:optimizeLegibility}@media (prefers-color-scheme:dark){body{background:#202b38;background:var(--background-body);color:#dbdbdb;color:var(--text-main)}}h1{font-size:2.2em}h1,h2{margin-bottom:12px;margin-top:24px}code,h1,h2,strong{color:#000;color:var(--text-bright)}@media (prefers-color-scheme:dark){h1{color:#fff;color:var(--text-bright)}}@media (prefers-color-scheme:dark){h2{color:#fff;color:var(--text-bright)}}@media (prefers-color-scheme:dark){strong{color:#fff;color:var(--text-bright)}}b,h1,h2,strong{font-weight:600}a>code,a>strong{color:inherit}a{text-decoration:none;color:#0076d1;color:var(--links)}@media (prefers-color-scheme:dark){a{color:#41adff;color:var(--links)}}a:hover{text-decoration:underline}code{background:#efefef;background:var(--background);color:var(--code);padding:2.5px 5px;border-radius:6px;font-size:1em}@media (prefers-color-scheme:dark){code{color:#ffbe85;color:var(--code);background:#161f27;background:var(--background)}}pre>code{padding:10px;display:block;overflow-x:auto}img{max-width:100%;height:auto;border-radius:8px}::-moz-selection{background-color:#9e9e9e;background-color:var(--selection);color:#000;color:var(--text-bright)}::selection{background-color:#9e9e9e;background-color:var(--selection);color:#000;color:var(--text-bright)}@media (prefers-color-scheme:dark){::-moz-selection{color:#fff;color:var(--text-bright)}::selection{color:#fff;color:var(--text-bright)}::-moz-selection{background-color:#1c76c5;background-color:var(--selection)}::selection{background-color:#1c76c5;background-color:var(--selection)}}footer{border-top:1px solid #dbdbdb;border-top:1px solid var(--border);padding-top:10px;color:#70777f;color:var(--text-muted)}@media (prefers-color-scheme:dark){footer{color:#a9b1ba;color:var(--text-muted);border-top:1px solid #526980;border-top:1px solid var(--border)}}body>footer{margin-top:40px}article{max-width:70ch;margin:auto}aside{font-style:italic}@media (prefers-color-scheme:dark){img{filter:brightness(80%);box-shadow:inset 0 0 85px rgba(0,0,0,.4)}}ul{margin:.8rem 0 1.1rem;padding:0 0 0 1.5em}li>ul{margin-top:.5rem}li:not(:last-child){margin-bottom:.3rem}p{margin:1em 0 -2px}.cover-image{margin-top:1rem;width:100%;max-height:45vh;object-fit:cover}main img{content-visibility:auto}share-widget{position:fixed;right:20px;bottom:20px;opacity:.9}share-widget div{width:30px;height:30px;background-image:url(/img/share.svg);background-repeat:no-repeat;background-position:center}.apple share-widget div{background-image:url(/img/share-apple.svg)}share-widget button{margin:0}share-widget button:active{transform:scale(1.2)}</style></head><body><header><nav><h1><a href="/" title="Home">Dmitrii's tech blog</a></h1><a href="/about/">About me</a></nav><h1>Step-by-Step Guide. Creating a React Hook for Web Page Element Movement Using RxJS</h1><aside>8 min read</aside><dialog id="message"></dialog></header><main><article><picture><source class="cover-image" sizes="90vw" srcset="/img/for_posts/rxjs_example/cover-1920w.avif 1920w, /img/for_posts/rxjs_example/cover-1280w.avif 1280w, /img/for_posts/rxjs_example/cover-640w.avif 640w, /img/for_posts/rxjs_example/cover-320w.avif 320w" type="image/avif"><source class="cover-image" sizes="90vw" srcset="/img/for_posts/rxjs_example/cover-1920w.webp 1920w, /img/for_posts/rxjs_example/cover-1280w.webp 1280w, /img/for_posts/rxjs_example/cover-640w.webp 640w, /img/for_posts/rxjs_example/cover-320w.webp 320w" type="image/webp"><source class="cover-image" sizes="90vw" srcset="/img/for_posts/rxjs_example/cover-1920w.png 1920w, /img/for_posts/rxjs_example/cover-1280w.png 1280w, /img/for_posts/rxjs_example/cover-640w.png 640w, /img/for_posts/rxjs_example/cover-320w.png 320w" type="image/png"><img decoding="async" height="1024" loading="lazy" src="/img/for_posts/rxjs_example/cover-1920w.png" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1792 1024'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8ElEQVR4nBXN20rCAACA4V0FeRNZqFhjYQ3TLXSrtrXcOky0NCObpZCyyAg6XIxGIR2si6z7HqAn8Lbn+6PvBT5hTsohKjZZt4l/P+L1Z4wffSKXDpnPW4gZlXQ8gbBkVtk6u8Vu9tk46KKXyhjlI8xGD+8iQvV8UskFBNWp0QkHKLqNud9FSsQpWB75FZ3L4Yi1WpukmEPIaC79wQtascBMLEZqeorZyQnWV4tcv38gWxXSi9p/XaEa3NC6e8Q97hE8vLHdCmiHT9SvIuTNBpLmISzrDqq5g10/5fz5i+/xL51wiLF3gmLsktUcxEyBP/GVbAVOLrINAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)" width="1792" class="cover-image"></picture><p>There are certain tasks for which RxJS (and overall reactive programming paradigm) is ideally suited. One such task is combining multiple "streams" of events to create a particular gesture. In this article, we will step-by-step write an universal React hook that allows attaching a movement gesture to any HTML element.</p><h2 id="why-choose-these-approaches">Why Choose These Approaches <a href="#why-choose-these-approaches" class="direct-link">#</a></h2><p>It is possible to combine 3 event emitters (for pointerdown, pointermove, pointerup events) without using RxJS, but I hope as the narrative progresses, you will appreciate the compactness and elegance of the solution using RxJS. In addition to the aesthetic sensations, there is an objective reason - it is difficult, if not impossible, to write tests for "pure" event emitters.</p><p>Instead of <code>MouseEvents</code>, the relatively new standard <code>PointerEvents</code> is used, which eliminates the need for writing specific code for mobile devices.</p><h2 id="what-we-get-in-the-end">What We Get in the End <a href="#what-we-get-in-the-end" class="direct-link">#</a></h2><p>We'll get an application like this - <a href="https://codesandbox.io/p/sandbox/react-usedraggable-hook-on-rxjs-with-composable-refs-vz3pp">https://codesandbox.io/p/sandbox/react-usedraggable-hook-on-rxjs-with-composable-refs-vz3pp</a></p><p><picture><source class="null" sizes="90vw" srcset="/img/for_posts/rxjs_example/1-1920w.avif 1920w, /img/for_posts/rxjs_example/1-1280w.avif 1280w, /img/for_posts/rxjs_example/1-640w.avif 640w, /img/for_posts/rxjs_example/1-320w.avif 320w" type="image/avif"><source class="null" sizes="90vw" srcset="/img/for_posts/rxjs_example/1-1920w.webp 1920w, /img/for_posts/rxjs_example/1-1280w.webp 1280w, /img/for_posts/rxjs_example/1-640w.webp 640w, /img/for_posts/rxjs_example/1-320w.webp 320w" type="image/webp"><source class="null" sizes="90vw" srcset="/img/for_posts/rxjs_example/1-1920w.png 1920w, /img/for_posts/rxjs_example/1-1280w.png 1280w, /img/for_posts/rxjs_example/1-640w.png 640w, /img/for_posts/rxjs_example/1-320w.png 320w" type="image/png"><img decoding="async" height="772" loading="lazy" src="/img/for_posts/rxjs_example/1-1920w.png" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1628 772'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAFCAYAAACTphZWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAjklEQVR4nHWMyw6CMBQF+0sEQSOID4T/3zVNtERJ1AU0hIrIrfYY755JJmdWR+zzAodjiSTbYZ1miFcJgkWMMFryBmGEbbpBXpQQxhj8aZoGUkpWKQWtNU5njfv1gk9d4es9RNsaEBHGcWSHYUDXddwTEd5Pi9fjhsk5CGstP89CBFdXnKLvew7v/byOeH+jrry14c9UoAAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&quot;)" width="1628" alt="Example screenshot"></picture><br>You will be able to move the grey div vertically.</p><h2 id="step-by-step">Step by Step <a href="#step-by-step" class="direct-link">#</a></h2><p>First, let's define the design of our solution. Here are its main elements:</p><ul><li>The logic of generating drag gesture events in a separate module. The module's API does not depend on the final framework in which it will be used. The logic should be covered by tests.</li><li>We format the logic in the React application as a universal hook.</li><li>Use the hook in the component that we want the user to be able to move.</li><li>Correctly unsubscribe from listening to all events upon the destruction (unmount) of the react element.</li></ul><h2 id="drag-gesture-module">Drag Gesture Module <a href="#drag-gesture-module" class="direct-link">#</a></h2><p>A drag gesture is a gesture of moving an object across the screen. It consists of a composition of events:</p><ul><li>Pressed on the element (pointerdown);</li><li>After that press, start listening to pointer movement events (pointermove);</li><li>Listen and respond to movements by changing the style transform: <code>translateY(&lt;...&gt;px);</code></li><li>Listen until the user releases (removes from the screen) the pointer (pointerup).</li></ul><p><picture><source class="null" sizes="90vw" srcset="/img/for_posts/rxjs_example/2-1920w.avif 1920w, /img/for_posts/rxjs_example/2-1280w.avif 1280w, /img/for_posts/rxjs_example/2-640w.avif 640w, /img/for_posts/rxjs_example/2-320w.avif 320w" type="image/avif"><source class="null" sizes="90vw" srcset="/img/for_posts/rxjs_example/2-1920w.webp 1920w, /img/for_posts/rxjs_example/2-1280w.webp 1280w, /img/for_posts/rxjs_example/2-640w.webp 640w, /img/for_posts/rxjs_example/2-320w.webp 320w" type="image/webp"><source class="null" sizes="90vw" srcset="/img/for_posts/rxjs_example/2-1920w.png 1920w, /img/for_posts/rxjs_example/2-1280w.png 1280w, /img/for_posts/rxjs_example/2-640w.png 640w, /img/for_posts/rxjs_example/2-320w.png 320w" type="image/png"><img decoding="async" height="904" loading="lazy" src="/img/for_posts/rxjs_example/2-1920w.png" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2256 904'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAFCAYAAABxeg0vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAArElEQVR4nHWOOwrCUBREs0dtbHQBbsBN2KewsXMHFiKCgkgCTyEY8V9YBTEfSExM3ntHTAhi4cBlZrjFHEMpSZ4XaP5LSlCyKLMRRAnXi8PtsiQNBKFn8/QFyUMQeXbZj+6C+yNEKjD8WGMO+qwmXTzR5jhvsR43cKfNMp+XHaxZD3M4Is40xmfmdNhTvCK0zMrZneuwFlbFo1JUHrF1NhWS0r/0df1Yfd+f5g31td4hiN22MQAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&quot;)" width="2256" alt="Sequence of Events"></picture></p><p>Here is a code for the logic:</p><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">DragEvent</span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> y<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createDragObservable</span><span class="token class-name generic"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> PointerEvent<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><br>  up$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span><br>  down$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span><br>  move$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><br><span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>DragEvent<span class="token operator">&gt;</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> startPosition<span class="token operator">:</span> DragEvent<span class="token punctuation">;</span><br>  <span class="token keyword">return</span> down$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><br>    <span class="token function">mergeMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>      startPosition <span class="token operator">=</span> startPosition <span class="token operator">||</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> e<span class="token punctuation">.</span>pageX<span class="token punctuation">,</span> y<span class="token operator">:</span> e<span class="token punctuation">.</span>pageY <span class="token punctuation">}</span><span class="token punctuation">;</span><br>      <span class="token keyword">return</span> move$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><br>        <span class="token function">takeUntil</span><span class="token punctuation">(</span>up$<span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><br>          x<span class="token operator">:</span> e<span class="token punctuation">.</span>pageX <span class="token operator">-</span> startPosition<span class="token punctuation">.</span>x<span class="token punctuation">,</span><br>          y<span class="token operator">:</span> e<span class="token punctuation">.</span>pageY <span class="token operator">-</span> startPosition<span class="token punctuation">.</span>y<span class="token punctuation">,</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>      <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>Yes, at first glance, RxJS seems to have a not very understandable API, but once you get used to it, you really start to enjoy how compactly you can describe complex operations.</p><p>What is happening here:</p><ul><li>Our function receives three "streams" (we will call them "streams", but in reality, this is a more general abstraction, based on the <strong>Observable</strong> pattern):</li><li>a stream of mouse click events on our element — <code>down$</code>,</li><li>a stream of mouse "release" events — <code>up$</code>,</li><li>a stream of cursor movement events — <code>move$</code>.</li></ul><p>The arguments end with a <code>$</code> not because of a craving for money (off-screen laughter), but to indicate that these variables are streams. This is a generally accepted convention in RxJS.</p><p>The function returns a new stream that sends events only when the mouse is actually moving after clicking on the element.</p><p>The function's body can be literally read as: we start listening to the stream of mouse click events (<code>down$</code>), and when an event occurs, we switch to listening to another stream, which will be returned by the function inside the <code>mergeMap</code> operator.</p><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">return</span> down$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><br>  <span class="token function">mergeMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>    startPosition <span class="token operator">=</span> startPosition <span class="token operator">||</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> e<span class="token punctuation">.</span>pageX<span class="token punctuation">,</span> y<span class="token operator">:</span> e<span class="token punctuation">.</span>pageY <span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> move$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><br>      <span class="token function">takeUntil</span><span class="token punctuation">(</span>up$<span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><br>        x<span class="token operator">:</span> e<span class="token punctuation">.</span>pageX <span class="token operator">-</span> startPosition<span class="token punctuation">.</span>x<span class="token punctuation">,</span><br>        y<span class="token operator">:</span> e<span class="token punctuation">.</span>pageY <span class="token operator">-</span> startPosition<span class="token punctuation">.</span>y<span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The new stream in <strong>mergeMap</strong> is "listening" to the mouse pointer movement events <code>move$</code>, which we listen to until an event from the "pointer release" stream up$ appears (this is handled by the <code>takeUntill</code> operator).</p><p>All events from the <code>move$</code> stream are transformed (<code>map</code> operator) into relative movement. It is relative to the initial position of the element.</p><p>The test for this logic looks like this:</p><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> marbles <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"rxjs-marbles/jest"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> createDragObservable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./use-draggable"</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><br>  d<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">PointerEvent</span><span class="token punctuation">(</span><span class="token string">"mousedown"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>  m<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">PointerEvent</span><span class="token punctuation">(</span><span class="token string">"mousedown"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>  u<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">PointerEvent</span><span class="token punctuation">(</span><span class="token string">"mousedown"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">"useDraggable"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>  <span class="token function">it</span><span class="token punctuation">(</span><br>    <span class="token string">"emits drag events only after mousedown and end after mouseup"</span><span class="token punctuation">,</span><br>    <span class="token function">marbles</span><span class="token punctuation">(</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>      <span class="token keyword">const</span> down$ <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">hot</span><span class="token punctuation">(</span><span class="token string">"-d--------"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">const</span> move$ <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">hot</span><span class="token punctuation">(</span><span class="token string">"mmmmm-mmmm"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">const</span> up$ <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">hot__</span><span class="token punctuation">(</span><span class="token string">"-------u--"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">const</span> expectedDrag$ <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">hot</span><span class="token punctuation">(</span><span class="token string">"-eeee-ee--"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> e<span class="token operator">:</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>      <span class="token keyword">const</span> drag$ <span class="token operator">=</span> <span class="token function">createDragObservable</span><span class="token punctuation">(</span>up$<span class="token punctuation">,</span> down$<span class="token punctuation">,</span> move$<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      m<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>drag$<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeObservable</span><span class="token punctuation">(</span>expectedDrag$<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Here, the library that facilitates testing RxJS is used - <a href="https://github.com/cartant/rxjs-marbles">https://github.com/cartant/rxjs-marbles</a></p><p>Its API is based on the same scheme for describing streams that is used to explain a solution that uses streams - marble diagram, or bead diagram. A typical diagram might look like this:</p><p><picture><source class="null" sizes="90vw" srcset="/img/for_posts/rxjs_example/3-1920w.avif 1920w, /img/for_posts/rxjs_example/3-1280w.avif 1280w, /img/for_posts/rxjs_example/3-640w.avif 640w, /img/for_posts/rxjs_example/3-320w.avif 320w" type="image/avif"><source class="null" sizes="90vw" srcset="/img/for_posts/rxjs_example/3-1920w.webp 1920w, /img/for_posts/rxjs_example/3-1280w.webp 1280w, /img/for_posts/rxjs_example/3-640w.webp 640w, /img/for_posts/rxjs_example/3-320w.webp 320w" type="image/webp"><source class="null" sizes="90vw" srcset="/img/for_posts/rxjs_example/3-1920w.png 1920w, /img/for_posts/rxjs_example/3-1280w.png 1280w, /img/for_posts/rxjs_example/3-640w.png 640w, /img/for_posts/rxjs_example/3-320w.png 320w" type="image/png"><img decoding="async" height="738" loading="lazy" src="/img/for_posts/rxjs_example/3-1920w.png" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1483 738'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAFCAIAAAAcxIEBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgElEQVR4nDXOQQ6DMAxE0dz/ilA1pVWlBIEhxcZ2bFKBxFv8xawmTGXvUlygx+ERv/kDT8zdPMT3XNwqEgVVZWERripT2dJSjqrDCLiziiBiaK0dl9YaMRekw30TdT9Hdw/VrNoVMwDIOa1rcXe7hXHFLkWY+9/r/LHtXFX5RkR/BCSdasjvr+oAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&quot;)" width="1483" alt="typical diagram rxjs"></picture></p><p>The diagram explains the principle of the <code>takeUntill</code> operator.<br>In this example, the first thread is a stream of some events (in our case, it is the <code>move$</code> stream - pointer movement), the second stream is the argument of the <code>takeUntil</code> operator, an emit event in this stream "stops" the emit event in the resulting stream (in our case, the emit event "pointer lifted" in the <code>up$</code> stream stops listening to pointer movement events).</p><p>Similarly, our test on <strong>rxjs-marbles</strong> is read:</p><ul><li>"-" means that nothing is emitted at this time quantum</li><li>"d" means that event d is emitted. The second argument is a map where the index d corresponds to a PointerEvent object.</li><li>"m", "u", "e" - is the same kind of event emit, but with different meanings.</li></ul><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> down$ <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">hot</span><span class="token punctuation">(</span><span class="token string">"-d--------"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> move$ <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">hot</span><span class="token punctuation">(</span><span class="token string">"mmmmm-mmmm"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> up$ <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">hot__</span><span class="token punctuation">(</span><span class="token string">"-------u--"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> expectedDrag$ <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">hot</span><span class="token punctuation">(</span><span class="token string">"-eeee-ee--"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> e<span class="token operator">:</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>drag$</code> is the stream created by our function, expectedDrag$ are the values that drag$ should emit after processing the streams.</p><p>Accordingly, the line:</p><pre class="language-typescript"><code class="language-typescript">m<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>drag$<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeObservable</span><span class="token punctuation">(</span>expectedDrag$<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>launches the test check.</p><h2 id="universal-react-hook-for-adding-%22movability%22-to-html-elements">Universal React Hook for Adding "Movability" to HTML Elements <a href="#universal-react-hook-for-adding-%22movability%22-to-html-elements" class="direct-link">#</a></h2><p>Hook's code:</p><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useDraggable</span><span class="token punctuation">(</span>draggableRef<span class="token operator">:</span> React<span class="token punctuation">.</span>RefObject<span class="token operator">&lt;</span>HTMLElement<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> drag$ <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token class-name generic"><span class="token operator">&lt;</span>Observable<span class="token operator">&lt;</span>DragEvent<span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token function">useLayoutEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>draggableRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">const</span> down$ <span class="token operator">=</span> <span class="token generic-function"><span class="token function">fromEvent</span><span class="token class-name generic"><span class="token operator">&lt;</span>PointerEvent<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>draggableRef<span class="token punctuation">.</span>current<span class="token punctuation">,</span> <span class="token string">"pointerdown"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> move$ <span class="token operator">=</span> <span class="token generic-function"><span class="token function">fromEvent</span><span class="token class-name generic"><span class="token operator">&lt;</span>PointerEvent<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">"pointermove"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> up$ <span class="token operator">=</span> <span class="token generic-function"><span class="token function">fromEvent</span><span class="token class-name generic"><span class="token operator">&lt;</span>PointerEvent<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">"pointerup"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    drag$<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token function">createDragObservable</span><span class="token punctuation">(</span>up$<span class="token punctuation">,</span> down$<span class="token punctuation">,</span> move$<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>draggableRef<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> drag$<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>The hook takes a <code>ref</code> as input, which will contain a link to the HTML element to which we are adding the ability to move.</p><p>Since the <code>down$</code> event stream can only be obtained after react renders all HTML elements (componentDidMount, or the function in useEffect, useLayoutEffect hooks), we will use <code>useRef</code> to create a mutable container into which we will write the drag gesture stream.</p><p>This <code>RefObject</code> is what we return from the hook.</p><h2 id="using-the-hook-in-a-component">Using the Hook in a Component <a href="#using-the-hook-in-a-component" class="direct-link">#</a></h2><p>The code of the component in which we use all this looks like this:</p><p><picture><source class="null" sizes="90vw" srcset="/img/for_posts/rxjs_example/component-1920w.avif 1920w, /img/for_posts/rxjs_example/component-1280w.avif 1280w, /img/for_posts/rxjs_example/component-640w.avif 640w, /img/for_posts/rxjs_example/component-320w.avif 320w" type="image/avif"><source class="null" sizes="90vw" srcset="/img/for_posts/rxjs_example/component-1920w.webp 1920w, /img/for_posts/rxjs_example/component-1280w.webp 1280w, /img/for_posts/rxjs_example/component-640w.webp 640w, /img/for_posts/rxjs_example/component-320w.webp 320w" type="image/webp"><source class="null" sizes="90vw" srcset="/img/for_posts/rxjs_example/component-1920w.png 1920w, /img/for_posts/rxjs_example/component-1280w.png 1280w, /img/for_posts/rxjs_example/component-640w.png 640w, /img/for_posts/rxjs_example/component-320w.png 320w" type="image/png"><img decoding="async" height="1492" loading="lazy" src="/img/for_posts/rxjs_example/component-1920w.png" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1564 1492'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5UlEQVR4nE2Oz0vCYACGv3+lS1Bi5GYynU3cL7dv6rAEZURU0spEl07oZGSHpNYpio7+qU+0Lh1e3svD+7zi/XvL/GlDus5YPmek67e8k9ULm68tIopnFBseFa+H5nVRLZ9C3WJHqdIfTRDReI4uexhhn7LTRrUlqh2wr5sMbxLEME5QTEktOKHS6qA6kiO3zZ7eZBDPENHtPTU/RPO7qK6kZPk5VDg2/4Cz8YJqK6TeOc2nFUvmqt8fuWJwPeXQcCk7AUXD5qDhUGp67GoG/dEd4jH75GK65DJ54Opfzicpq9cPfgB98n/eB19xgQAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&quot;)" width="1564" alt="Source code of component"></picture></p><p>We have created a container (ref-object), into which react will place a link to the rendered HTML element - <code>draggableDivRef</code>. This object was given as an argument in our hook - <code>useDraggable</code>.</p><p>In the <code>useLayoutEffect</code> hook, we described the logic of reacting to events - we update the position of the element along the Y-axis by setting the style:</p><pre class="language-typescript"><code class="language-typescript">draggableDivRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">translateY(</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>e<span class="token punctuation">.</span>y<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">px)</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span></code></pre><p>And do not forget to unsubscribe from all events:</p><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>  dragSubscription<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>And this is actually a very important part of our RxJS-based solution - we unsubscribed from the <code>drag$</code> event stream, but in fact, since it consists of a combination of three other streams, there was also an unsubscribe from these three streams (r<code>up$, down$, move$</code>). And this is one of the key selling points of RxJS-based solutions compared to working with traditional <strong>Event Emitter</strong> - in <strong>Event Emitter</strong> there is no cascading unsubscribe from events, and you have to handle this yourself in the code, and it is often difficult to keep track of.</p><p>The second key advantage of RxJS over the usual <strong>Event Emitter</strong> is the ability to test all the components of the solution: the beginning of the subscription to events, the sequence of events between several streams, the values emitted by the streams at one time or another, and the end of the subscription to events.</p><h2 id="how-the-solution-can-be-improved-further">How the Solution Can Be Improved Further <a href="#how-the-solution-can-be-improved-further" class="direct-link">#</a></h2><p>Add support for `pointercancel`` events and others to cancel the gesture not only by lifting the pointer, but also by an incoming call, for example. You can learn more about working with PointerEvents and gestures in general in the lecture I prepared for the School of Interface Development at Yandex - <a href="https://www.youtube.com/watch?v=VZAcd2svW7w">https://www.youtube.com/watch?v=VZAcd2svW7w</a></p><p>It is also worth writing tests that take into account not only the order of events but also specific movement values. That is, to test that if there were two pointermove events with a 10px shift each, then the total shift will be 20px.</p><h2 id="conclusion">Conclusion <a href="#conclusion" class="direct-link">#</a></h2><p>Yes, to solve not the most complex problem, we touched on so many topics: react, hook, refs, useEffect, rxjs, marbles, jest, and many others. Someone will say that this is over-engineering (i.e., too complex a solution to a simple problem) and they may be right, it all depends on the context!</p><p>If you need an object movement gesture, you can use one of a dozen libraries, but usually 90% of the code that you will include to JS bundle won't be used (since it's usually a generic solution for various use cases). Typically, they do not have tests. However, if you have a startup, then this is a quite workable option.</p><p>You could have avoided using RxJS, but I can't imagine a solution that would be read and understood faster, would be more isolated, and for which it would be easier to write tests. If you, dear reader, know of such a thing - tell me in <a href="https://twitter.com/sky2high0">twitter/x</a>! I sincerely wish to see it!</p><h2 id="resources-for-learning-rxjs">Resources for Learning RxJS <a href="#resources-for-learning-rxjs" class="direct-link">#</a></h2><ul><li><a href="https://reactivex.io/">"The first" site</a> on Rx technology with a collection of basic implementations and a description of the approach. It's not very understandable, but comprehensive.</li><li><a href="https://www.learnrxjs.io/">An excellent and understandable reference for many RxJS operators</a>. I used to open it quite often.</li><li><a href="https://dev.to/creeland/intro-to-rxjs-concepts-with-vanilla-javascript-4aji">An introduction to RxJS through writing your own implementation of the approach in regular JS In English</a>. The examples in JS are understandable and simple.</li><li><a href="https://benlesh.medium.com/">Blog of Ben Lash</a> - the main maintainer of the Github repo RxJS.</li></ul><div style="margin-top: 24px"><a href="/tags/javascript/" class="pill">#javascript</a> <a href="/tags/typescript/" class="pill">#typescript</a> <a href="/tags/rxjs/" class="pill">#rxjs</a></div><h1>***</h1><p>Since you've made it this far, <a href="https://dushkin.tech/posts/rxjs_example/" on-click="share">sharing</a> this article on your favorite social media network would be highly appreciated 💖! For feedback, please <a href="https://twitter.com/sky2high0" rel="noopener" target="_blank">ping me on Twitter</a>.</p><share-widget><button aria-label="Share" href="https://dushkin.tech/posts/rxjs_example/" on-click="share"><div></div></button></share-widget><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Step-by-Step Guide. Creating a React Hook for Web Page Element Movement Using RxJS","image":["https://dushkin.tech/img/for_posts/rxjs_example/cover-1920w.png","https://dushkin.tech/img/for_posts/rxjs_example/1-1920w.png","https://dushkin.tech/img/for_posts/rxjs_example/2-1920w.png","https://dushkin.tech/img/for_posts/rxjs_example/3-1920w.png","https://dushkin.tech/img/for_posts/rxjs_example/component-1920w.png"],"author":"Dmitrii Dushkin","genre":"software development","publisher":{"@type":"Organization","name":"Dmitrii Dushkin","logo":{"@type":"ImageObject","url":"/img/favicon/android-chrome-192x192.png?hash=97ce250480"}},"url":"https://dushkin.tech/posts/rxjs_example/","mainEntityOfPage":"https://dushkin.tech/posts/rxjs_example/","datePublished":"2024-01-07","dateModified":"2024-04-04","description":"There are certain tasks for which RxJS (and overall reactive programming paradigm) is ideally suited. One such task is combining multiple..."}</script><p>Published <time datetime="2024-01-07">07 Jan 2024</time></p></article></main><footer><a href="/about/">Dmitrii Dushkin</a></footer></body></html>